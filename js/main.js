(()=>{"use strict";class t{constructor(t){this.slider=t,this.slides=this.slider.querySelector(".slider-h__slides-list "),this.arrows=[...this.slider.querySelectorAll(".slider__arrow")],this.paginations=this.slider.querySelector(".slider-h__pagination-list"),this.wrLine=this.slider.querySelector(".slider-h__nav-line"),this.line=this.wrLine.children[0],this.amountSlides=this.slides.children.length,this.widthLine=null,this.timingFunc="linear",this.duration="0.3",this.lineCounter=0,this.initSlider=this.initSlider.bind(this)}initSlider(){if(1===this.amountSlides)return;this.slides.style.width=100*this.amountSlides+"%",this.arrows.forEach((t=>t.style="display: block;")),this.arrows[0].parentElement.style="justify-content: space-between;";const t=this.wrLine.offsetWidth;this.widthLine=t/this.amountSlides/innerWidth*100,this.line.style=`width: ${this.widthLine}vw;`,this.line.style.transition=`transform ${this.duration}s ${this.timingFunc}`}moveNext(){const t=this.slider.offsetWidth;this.slides.style.transition=`transform ${this.duration}s ${this.timingFunc}`,this.slides.style.transform=`translateX(-${t}px)`,this.slides.addEventListener("transitionend",(()=>{this.slides.style.transition="",this.slides.append(this.slides.children[0]),this.slides.style.transform=""}),{once:!0}),this.moveLineNext()}movePrev(){const t=this.slider.offsetWidth,i=this.slides.children.length-1;this.slides.prepend(this.slides.children[i]),this.slides.style.transform=`translateX(-${t}px)`,setTimeout((()=>{this.slides.style.transition=`transform ${this.duration}s ${this.timingFunc}`,this.slides.style.transform=""})),this.slides.addEventListener("transitionend",(()=>{this.slides.style.transition=""}),{once:!0}),this.moveLinePrev()}clickPag(t){const i=+t.dataset.num;if(i!==this.lineCounter){if(i>this.lineCounter){const t=i-this.lineCounter;for(let i=0;i<t;i+=1)this.moveNext()}if(i<this.lineCounter){const t=this.lineCounter-i;for(let i=0;i<t;i+=1)this.movePrev()}}}moveLineNext(){if(this.lineCounter+=1,this.lineCounter!==this.amountSlides){const t=this.widthLine*this.lineCounter;this.line.style.transform=`translateX(${t}vw)`}if(this.lineCounter===this.amountSlides){const t=this.widthLine*this.lineCounter;this.line.style.transform=`translateX(${t}vw)`;const i=this.createLine();this.wrLine.prepend(i),i.style.transform=`translateX(-${this.widthLine}vw)`,setTimeout((()=>{i.style.transform=""})),i.addEventListener("transitionend",(()=>{this.wrLine.children[1].remove(),i.style.position="",this.line=this.wrLine.children[0],this.lineCounter=0}),{once:!0})}}moveLinePrev(){if(this.lineCounter-=1,this.lineCounter<0){const t=this.widthLine*this.lineCounter;this.line.style.transform=`translateX(${t}vw)`;const i=this.createLine();this.wrLine.append(i);const e=this.widthLine*this.amountSlides;return i.style.transform=`translateX(${e}vw)`,this.lineCounter=this.amountSlides-1,setTimeout((()=>{const t=e-this.widthLine;i.style.transform=`translateX(${t}vw)`})),void i.addEventListener("transitionend",(()=>{this.wrLine.children[0].remove(),i.style.position="",this.line=this.wrLine.children[0]}),{once:!0})}if(this.lineCounter>=0){const t=this.widthLine*this.lineCounter;this.line.style.transform=`translateX(${t}vw)`}}createLine(){const t=document.createElement("div");return t.style.position="absolute",t.style.transition=`transform ${this.duration}s ${this.timingFunc}`,t.style.width=`${this.widthLine}vw`,t.classList.add("slider-h__nav-line-item"),t}}class i{constructor(t){this.d=t,this.slider=t.slider,this.initSlider=t.initSlider,this.click=this.click.bind(this)}init(){this.d.initSlider(),this.d.slider.addEventListener("click",this.click)}click(t){t.target.closest(".slider__arrow-next")&&this.d.moveNext(),t.target.closest(".slider__arrow-prev")&&this.d.movePrev(),t.target.closest(".slider-h__pagination-item")&&this.d.clickPag(t.target.closest(".slider-h__pagination-item"))}}class e{constructor(t){this.d=t}init(){this.d.initSlider()}}class s{constructor(t,i){this.slider=t,this.data=i,this.wrSlides=this.slider.querySelector(".sl-prod__wr-slides"),this.slides=this.slider.querySelector(".sl-prod__slides"),this.arrow=this.slider.querySelector(".slider__arrow"),this.bigImg=this.slider.querySelector(".sl-prod__big-img img"),this.amountSlides=this.slides.children.length,this.amountShow=3,this.gap=parseFloat(getComputedStyle(this.slides).gap)}initSlider(){this.data.forEach(((t,i)=>{const e=this.createSlide(t.img,t.title,"#",t.title);0===i&&(e.dataset.status="active",e.classList.add("sl-prod__slide_active"),this.bigImg.src=t.img,this.bigImg.alt=t.title),this.slides.append(e)})),this.arrow.style="\n        position: absolute;\n        right: 2%;\n        top: 50%;\n\n        display: block;\n\n        transform: translate(0, -50%);\n        ";let t=[...this.slides.children].reduce(((t,i,e)=>e<this.amountShow?t+=i.offsetWidth/innerWidth*100:t),0);t+=this.gap*this.amountShow/innerWidth*100,this.wrSlides.style=`width: ${t.toFixed(3)}vw;`,console.log(t)}createSlide(t,i,e,s){const n=this.createEl("li","sl-prod__slide"),r=this.createEl("div","sl-prod__wr-img-slide"),l=this.createEl("img","sl-prod__img-slide");l.src=t,r.append(l);const o=this.createEl("div","sl-prod__wr-title-slide"),h=this.createEl("h3","sl-prod__title-slide");h.textContent=i,o.append(h);const d=this.createEl("div","sl-prod__wr-button-slide"),a=this.createEl("a","sl-prod__button-slide");return a.href=e,a.title=s,a.textContent="Подробнее",d.append(a),n.append(r),n.append(o),n.append(d),n}createEl(t,i){const e=document.createElement(t);return e.classList.add(i),e}}const n=JSON.parse('[{"id":"columbia1","title":"colombia andino","taste":"спелый гранат, грейпфрут, виноград, настой шиповника","aroma":"сладкие фрукты, цветы","processing":"мытая","height":"1500-1900м","sort":"катурра, колумбия, кастильо","q":"84.75","weight":"1 кг","img":"./img/content/pack_content2.png"},{"id":"columbia2","title":"colombia andino2","taste":"спелый гранат, грейпфрут, виноград, настой шиповника","aroma":"сладкие фрукты, цветы","processing":"мытая","height":"1500-1900м","sort":"катурра, колумбия, кастильо","q":"84.75","weight":"1 кг","img":"./img/content/pack_content2.png"},{"id":"columbia3","title":"colombia andino3","taste":"спелый гранат, грейпфрут, виноград, настой шиповника","aroma":"сладкие фрукты, цветы","processing":"мытая","height":"1500-1900м","sort":"катурра, колумбия, кастильо","q":"84.75","weight":"1 кг","img":"./img/content/pack_content2.png"},{"id":"columbia4","title":"colombia andino4","taste":"спелый гранат, грейпфрут, виноград, настой шиповника","aroma":"сладкие фрукты, цветы","processing":"мытая","height":"1500-1900м","sort":"катурра, колумбия, кастильо","q":"84.75","weight":"1 кг","img":"./img/content/pack_content2.png"},{"id":"columbia5","title":"colombia andino5","taste":"спелый гранат, грейпфрут, виноград, настой шиповника","aroma":"сладкие фрукты, цветы","processing":"мытая","height":"1500-1900м","sort":"катурра, колумбия, кастильо","q":"84.75","weight":"1 кг","img":"./img/content/pack_content2.png"}]');document.addEventListener("DOMContentLoaded",(r=>{const l=document.querySelector(".slider-h");if(l){const e=new t(l);new i(e).init()}const o=document.querySelector(".products__wr-slider-top");if(o){const t=new s(o,n);new e(t).init()}}))})();
//# sourceMappingURL=main.js.map